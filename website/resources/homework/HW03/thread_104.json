{
  "id": 7037485,
  "user_id": 591161,
  "course_id": 84647,
  "original_id": null,
  "editor_id": 591161,
  "accepted_id": null,
  "duplicate_id": null,
  "number": 104,
  "type": "post",
  "title": "HW3 Solutions",
  "content": "<document version=\"2.0\"><paragraph>Hi all,</paragraph><paragraph>Please ask any questions related to HW3 solutions here.</paragraph><file url=\"https://static.us.edusercontent.com/files/T54IADqbY7BgXVGdG4fJuDHy\" filename=\"hw03_solution.pdf\"/><file url=\"https://static.us.edusercontent.com/files/rtcd9l9G8lvvqyOB42pw9eKt\" filename=\"q_mup_coding_sol.ipynb\"/><paragraph>EDIT (10/16): The coding solution has been updated to reflect the correction mentioned in #149</paragraph></document>",
  "document": "Hi all,\n\nPlease ask any questions related to HW3 solutions here.\n\nEDIT (10/16): The coding solution has been updated to reflect the correction mentioned in #149",
  "category": "Problem Sets",
  "subcategory": "",
  "subsubcategory": "",
  "flag_count": 0,
  "star_count": 2,
  "view_count": 1101,
  "unique_view_count": 223,
  "vote_count": 1,
  "reply_count": 15,
  "unresolved_count": 0,
  "is_locked": false,
  "is_pinned": false,
  "is_private": false,
  "is_endorsed": false,
  "is_answered": false,
  "is_student_answered": false,
  "is_staff_answered": false,
  "is_archived": false,
  "is_anonymous": false,
  "is_megathread": true,
  "anonymous_comments": false,
  "approved_status": "approved",
  "created_at": "2025-09-29T19:40:16.057496+10:00",
  "updated_at": "2025-12-18T10:55:03.326892+11:00",
  "deleted_at": null,
  "pinned_at": null,
  "anonymous_id": 0,
  "vote": 0,
  "is_seen": true,
  "is_starred": false,
  "is_watched": null,
  "glanced_at": "2025-12-03T12:49:29.702735+11:00",
  "new_reply_count": 0,
  "duplicate_title": null,
  "answers": [],
  "comments": [
    {
      "id": 16403251,
      "user_id": 1751552,
      "course_id": 84647,
      "thread_id": 7037485,
      "original_id": null,
      "parent_id": null,
      "editor_id": null,
      "number": 1,
      "type": "comment",
      "kind": "normal",
      "content": "<document version=\"2.0\"><paragraph>Can I ask where I can find the solution to the problem in the Colab for question 2?</paragraph></document>",
      "document": "Can I ask where I can find the solution to the problem in the Colab for question 2?",
      "flag_count": 0,
      "vote_count": 1,
      "is_endorsed": false,
      "is_anonymous": false,
      "is_private": false,
      "is_resolved": true,
      "created_by_bot_id": null,
      "created_at": "2025-09-30T10:51:21.589656+10:00",
      "updated_at": "2025-09-30T13:18:58.594681+10:00",
      "deleted_at": null,
      "anonymous_id": 0,
      "vote": 0,
      "comments": [
        {
          "id": 16635512,
          "user_id": 591161,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16403251,
          "editor_id": null,
          "number": 14,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>See the updated solution notebook attached to this post!</paragraph></document>",
          "document": "See the updated solution notebook attached to this post!",
          "flag_count": 0,
          "vote_count": 0,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-17T13:35:29.340255+11:00",
          "updated_at": null,
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": []
        }
      ]
    },
    {
      "id": 16404536,
      "user_id": 647625,
      "course_id": 84647,
      "thread_id": 7037485,
      "original_id": null,
      "parent_id": null,
      "editor_id": null,
      "number": 2,
      "type": "comment",
      "kind": "normal",
      "content": "<document version=\"2.0\"><paragraph>For part d, why do we multiply by p_shape[1]. I feel like we should be dividing by it?</paragraph></document>",
      "document": "For part d, why do we multiply by p_shape[1]. I feel like we should be dividing by it?",
      "flag_count": 0,
      "vote_count": 2,
      "is_endorsed": false,
      "is_anonymous": false,
      "is_private": false,
      "is_resolved": true,
      "created_by_bot_id": null,
      "created_at": "2025-09-30T12:06:49.402763+10:00",
      "updated_at": "2025-10-01T17:38:52.476625+10:00",
      "deleted_at": null,
      "anonymous_id": 0,
      "vote": 0,
      "comments": [
        {
          "id": 16423090,
          "user_id": 954911,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16404536,
          "editor_id": null,
          "number": 7,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>Yea Im a bit stuck on this too. I saw on the actual hw thread the ta mentioned there's an exact algebraic solution but taking into account the sigmoid activation for the exact activation delta becomes very hairy because of the element wise operations</paragraph></document>",
          "document": "Yea Im a bit stuck on this too. I saw on the actual hw thread the ta mentioned there's an exact algebraic solution but taking into account the sigmoid activation for the exact activation delta becomes very hairy because of the element wise operations",
          "flag_count": 0,
          "vote_count": 0,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-01T17:05:12.763879+10:00",
          "updated_at": null,
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": []
        },
        {
          "id": 16427616,
          "user_id": 954911,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16404536,
          "editor_id": 954911,
          "number": 8,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>The only like qualitative thing I can think of is that the learning rates used in the problem are different (2 in part c and 1e-1 in part d) so multiplying d_in pushes the forward pass in the gradient to be close to 1 so the updates are not too different and the activation deltas stay the same? Im not sure about the rigorous algebraic approach though or if this is right lol.</paragraph><paragraph>If I change the lr=2 instead of the default 1e-1 to match part c, then the RMS norm graphs I get are closer to the part c (with only initial layer RMS norms being different)</paragraph><figure><image src=\"https://static.us.edusercontent.com/files/vhO9Uij3SieVZf9978jpjTij\" width=\"609\" height=\"344.5882352941176\"/></figure><paragraph/></document>",
          "document": "The only like qualitative thing I can think of is that the learning rates used in the problem are different (2 in part c and 1e-1 in part d) so multiplying d_in pushes the forward pass in the gradient to be close to 1 so the updates are not too different and the activation deltas stay the same? Im not sure about the rigorous algebraic approach though or if this is right lol.\n\nIf I change the lr=2 instead of the default 1e-1 to match part c, then the RMS norm graphs I get are closer to the part c (with only initial layer RMS norms being different)\n\n",
          "flag_count": 0,
          "vote_count": 0,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-02T03:39:13.862495+10:00",
          "updated_at": "2025-10-02T05:00:28.301199+10:00",
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": []
        },
        {
          "id": 16635577,
          "user_id": 591161,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16404536,
          "editor_id": null,
          "number": 15,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>Yes, you're right - please see the updated solution on this post and please follow up if you have any follow-up  questions!</paragraph></document>",
          "document": "Yes, you're right - please see the updated solution on this post and please follow up if you have any follow-up  questions!",
          "flag_count": 0,
          "vote_count": 0,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-17T13:41:38.237409+11:00",
          "updated_at": null,
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": [
            {
              "id": 16636301,
              "user_id": 647625,
              "course_id": 84647,
              "thread_id": 7037485,
              "original_id": null,
              "parent_id": 16635577,
              "editor_id": null,
              "number": 16,
              "type": "comment",
              "kind": "normal",
              "content": "<document version=\"2.0\"><paragraph>Thanks! Just want to make sure I'm understanding this correctly, the solution is basically saying that the update step to the gradient remains unchanged, but because we're scaling everything down by 1/d_in before applying the nonlinearity, the change in the activation that results from the weights being updated is scaled down by 1/d_in, which is the same affect as if the updates to the weights were scaled by 1/d_in?</paragraph><paragraph/></document>",
              "document": "Thanks! Just want to make sure I'm understanding this correctly, the solution is basically saying that the update step to the gradient remains unchanged, but because we're scaling everything down by 1/d_in before applying the nonlinearity, the change in the activation that results from the weights being updated is scaled down by 1/d_in, which is the same affect as if the updates to the weights were scaled by 1/d_in?\n\n",
              "flag_count": 0,
              "vote_count": 0,
              "is_endorsed": false,
              "is_anonymous": false,
              "is_private": false,
              "is_resolved": false,
              "created_by_bot_id": null,
              "created_at": "2025-10-17T14:47:52.65672+11:00",
              "updated_at": null,
              "deleted_at": null,
              "anonymous_id": 0,
              "vote": 0,
              "comments": []
            }
          ]
        }
      ]
    },
    {
      "id": 16408555,
      "user_id": 1759011,
      "course_id": 84647,
      "thread_id": 7037485,
      "original_id": null,
      "parent_id": null,
      "editor_id": 1759011,
      "number": 4,
      "type": "comment",
      "kind": "normal",
      "content": "<document version=\"2.0\"><paragraph>Hi there! I think for problem 1 section (a), the first conclusion in the solution: </paragraph><paragraph>'Each element of y is a sum of d1 independent Gaussian variables, and thus has a variance of d1.'</paragraph><paragraph>I think this conclusion is not correct, since <bold><italic>the multiplication r.v. of two i.i.d normal distribution is not normal distributions</italic></bold>, though we can still use elementary probability to prove that the variance is indeed d1. For more information about what is the distribution of multiplication r.v. of two i.i.d normal distributions, I find a paper which may be helpful:</paragraph><paragraph><link href=\"https://projecteuclid.org/journals/annals-of-mathematical-statistics/volume-7/issue-1/On-the-Frequency-Function-of-xy/10.1214/aoms/1177732541.full\">https://projecteuclid.org/journals/annals-of-mathematical-statistics/volume-7/issue-1/On-the-Frequency-Function-of-xy/10.1214/aoms/1177732541.full</link></paragraph><paragraph>Thanks for noticing. Please correct me if I'm wrong. <break/></paragraph></document>",
      "document": "Hi there! I think for problem 1 section (a), the first conclusion in the solution: \n\n'Each element of y is a sum of d1 independent Gaussian variables, and thus has a variance of d1.'\n\nI think this conclusion is not correct, since the multiplication r.v. of two i.i.d normal distribution is not normal distributions, though we can still use elementary probability to prove that the variance is indeed d1. For more information about what is the distribution of multiplication r.v. of two i.i.d normal distributions, I find a paper which may be helpful:\n\nhttps://projecteuclid.org/journals/annals-of-mathematical-statistics/volume-7/issue-1/On-the-Frequency-Function-of-xy/10.1214/aoms/1177732541.full\n\nThanks for noticing. Please correct me if I'm wrong. \n",
      "flag_count": 0,
      "vote_count": 2,
      "is_endorsed": false,
      "is_anonymous": false,
      "is_private": false,
      "is_resolved": true,
      "created_by_bot_id": null,
      "created_at": "2025-09-30T19:09:28.853345+10:00",
      "updated_at": "2025-10-03T09:51:14.675612+10:00",
      "deleted_at": null,
      "anonymous_id": 0,
      "vote": 0,
      "comments": [
        {
          "id": 16432036,
          "user_id": 970785,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16408555,
          "editor_id": null,
          "number": 9,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>I think you are right! The argument in the solution is incorrect.</paragraph><paragraph/></document>",
          "document": "I think you are right! The argument in the solution is incorrect.\n\n",
          "flag_count": 0,
          "vote_count": 1,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-02T08:00:32.229195+10:00",
          "updated_at": "2025-10-03T09:51:14.389373+10:00",
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": []
        },
        {
          "id": 16437254,
          "user_id": 591161,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16408555,
          "editor_id": 591161,
          "number": 11,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>You're right that this first sentence has a slight inaccuracy - the product $W_{ij} x_j$ may not be Gaussian, but the overall conclusion on the scaling of the RMS remains the same. For each coordinate $y_i$, we have:</paragraph><paragraph>$$\\mathbb{E}\\left[y_i^2\\right] = Var(y_i) = \\sum_j Var(W_{ij} x_j) = \\sum_i Var(W_{ij}) Var(x_j) = d_1$$</paragraph><paragraph>This relies on the fact that variance is both additive and multiplicative for independent, zero-mean random variables.</paragraph></document>",
          "document": "You're right that this first sentence has a slight inaccuracy - the product $W_{ij} x_j$ may not be Gaussian, but the overall conclusion on the scaling of the RMS remains the same. For each coordinate $y_i$, we have:\n\n$$\\mathbb{E}\\left[y_i^2\\right] = Var(y_i) = \\sum_j Var(W_{ij} x_j) = \\sum_i Var(W_{ij}) Var(x_j) = d_1$$\n\nThis relies on the fact that variance is both additive and multiplicative for independent, zero-mean random variables.",
          "flag_count": 0,
          "vote_count": 1,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-02T14:15:16.65289+10:00",
          "updated_at": "2025-10-03T09:51:13.222286+10:00",
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": [
            {
              "id": 16437447,
              "user_id": 591161,
              "course_id": 84647,
              "thread_id": 7037485,
              "original_id": null,
              "parent_id": 16437254,
              "editor_id": null,
              "number": 13,
              "type": "comment",
              "kind": "normal",
              "content": "<document version=\"2.0\"><paragraph>Update: I've edited the solutions to clarify this point.</paragraph></document>",
              "document": "Update: I've edited the solutions to clarify this point.",
              "flag_count": 0,
              "vote_count": 1,
              "is_endorsed": false,
              "is_anonymous": false,
              "is_private": false,
              "is_resolved": false,
              "created_by_bot_id": null,
              "created_at": "2025-10-02T14:34:48.677079+10:00",
              "updated_at": "2025-10-03T09:51:12.365712+10:00",
              "deleted_at": null,
              "anonymous_id": 0,
              "vote": 0,
              "comments": []
            }
          ]
        }
      ]
    },
    {
      "id": 16416252,
      "user_id": 961709,
      "course_id": 84647,
      "thread_id": 7037485,
      "original_id": null,
      "parent_id": null,
      "editor_id": 961709,
      "number": 5,
      "type": "comment",
      "kind": "normal",
      "content": "<document version=\"2.0\"><paragraph>Hi! For 1b, I am confused about the solution. Were we not asked to find RMS norm squared? In that case would that mean the final expectation will be quadratic in d1 (similar to the discussion I believe)?</paragraph><figure><image src=\"https://static.us.edusercontent.com/files/Yz4ZHSgHPH2hzIYX2hWD1E9E\" width=\"655\" height=\"325.86086086086084\"/></figure><paragraph>I think the normalization factor would still be the same as well?</paragraph></document>",
      "document": "Hi! For 1b, I am confused about the solution. Were we not asked to find RMS norm squared? In that case would that mean the final expectation will be quadratic in d1 (similar to the discussion I believe)?\n\nI think the normalization factor would still be the same as well?",
      "flag_count": 0,
      "vote_count": 0,
      "is_endorsed": false,
      "is_anonymous": false,
      "is_private": false,
      "is_resolved": true,
      "created_by_bot_id": null,
      "created_at": "2025-10-01T08:04:11.545884+10:00",
      "updated_at": "2025-10-01T08:04:29.702529+10:00",
      "deleted_at": null,
      "anonymous_id": 0,
      "vote": 0,
      "comments": [
        {
          "id": 16419061,
          "user_id": 1759011,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16416252,
          "editor_id": 1759011,
          "number": 6,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>In the solution, it says 'expected RMS norm that scales as O(d1)', not 'expected squared RMS norm'. Maybe staff made a small typo here, but this conclusion is still valid. </paragraph></document>",
          "document": "In the solution, it says 'expected RMS norm that scales as O(d1)', not 'expected squared RMS norm'. Maybe staff made a small typo here, but this conclusion is still valid. ",
          "flag_count": 0,
          "vote_count": 1,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-01T10:58:26.062176+10:00",
          "updated_at": "2025-10-02T09:17:38.134937+10:00",
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": [
            {
              "id": 16433317,
              "user_id": 961709,
              "course_id": 84647,
              "thread_id": 7037485,
              "original_id": null,
              "parent_id": 16419061,
              "editor_id": null,
              "number": 10,
              "type": "comment",
              "kind": "normal",
              "content": "<document version=\"2.0\"><paragraph>I confirmed with Joey at discussion. It would be quadratic if it was 'expected squared RMS norm' but as you said the conclusion (scaling factor) is still valid.</paragraph></document>",
              "document": "I confirmed with Joey at discussion. It would be quadratic if it was 'expected squared RMS norm' but as you said the conclusion (scaling factor) is still valid.",
              "flag_count": 0,
              "vote_count": 0,
              "is_endorsed": false,
              "is_anonymous": false,
              "is_private": false,
              "is_resolved": false,
              "created_by_bot_id": null,
              "created_at": "2025-10-02T09:17:36.73071+10:00",
              "updated_at": null,
              "deleted_at": null,
              "anonymous_id": 0,
              "vote": 0,
              "comments": []
            }
          ]
        },
        {
          "id": 16437439,
          "user_id": 591161,
          "course_id": 84647,
          "thread_id": 7037485,
          "original_id": null,
          "parent_id": 16416252,
          "editor_id": null,
          "number": 12,
          "type": "comment",
          "kind": "normal",
          "content": "<document version=\"2.0\"><paragraph>Good catch! Just updated the solution to clarify this.</paragraph></document>",
          "document": "Good catch! Just updated the solution to clarify this.",
          "flag_count": 0,
          "vote_count": 1,
          "is_endorsed": false,
          "is_anonymous": false,
          "is_private": false,
          "is_resolved": false,
          "created_by_bot_id": null,
          "created_at": "2025-10-02T14:34:24.279804+10:00",
          "updated_at": "2025-10-03T01:49:58.793238+10:00",
          "deleted_at": null,
          "anonymous_id": 0,
          "vote": 0,
          "comments": []
        }
      ]
    }
  ]
}